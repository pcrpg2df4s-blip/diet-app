import google.generativeai as genai
import os
from dotenv import load_dotenv

# 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
load_dotenv()

# 2. –î–æ—Å—Ç–∞–µ–º –∫–ª—é—á (–¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ main.py)
api_key = os.getenv("GOOGLE_API_KEY")

# –ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç, —Å—Ä–∞–∑—É —Å–∫–∞–∂–µ–º –æ–± —ç—Ç–æ–º
if not api_key:
    print("\n‚ùå –û–®–ò–ë–ö–ê: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è GOOGLE_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!")
    print("–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ .env –Ω–∞–ø–∏—Å–∞–Ω–æ:")
    print("GOOGLE_API_KEY=—Ç–≤–æ–π_–∫–ª—é—á_–∑–¥–µ—Å—å")
    exit()

print(f"üîë –ö–ª—é—á —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω: {api_key[:8]}... (—Å–∫—Ä—ã—Ç)")

# 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
genai.configure(api_key=api_key)

print("\nüîç –ü–æ–¥–∫–ª—é—á–∞—é—Å—å –∫ Google –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π...\n")

try:
    count = 0
    # –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ –º–æ–¥–µ–ª–∏, –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–≤–æ–µ–º—É –∫–ª—é—á—É
    for m in genai.list_models():
        # –ù–∞–º –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —É–º–µ—é—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç (generateContent)
        if 'generateContent' in m.supported_generation_methods:
            print(f"‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞: {m.name}")
            count += 1
    
    if count == 0:
        print("\n‚ö†Ô∏è –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –ø—É—Å—Ç. –ö–ª—é—á –≤–µ—Ä–Ω—ã–π, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –Ω–µ—Ç (—Å—Ç—Ä–∞–Ω–Ω–æ).")
    else:
        print(f"\nüöÄ –í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ –º–æ–¥–µ–ª–µ–π: {count}")
        print("–†–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: models/gemini-2.0-flash")

except Exception as e:
    print(f"\n‚ùå –û–®–ò–ë–ö–ê API:\n{e}")